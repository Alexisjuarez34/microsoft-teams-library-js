steps:
  - bash: xchtmlreport -r TestResults -j > /dev/null

      if [[ $? == 0 ]];
      then
      echo "Test report has been generated successfully.";
      exit 0;
      else
      echo "Test report generating process failed for some reasons.";
      exit 1;
      fi;
    displayName: 'Generate E2E test report'
    workingDirectory: '$(Agent.BuildDirectory)/iOSHost'
    condition: succeededOrFailed()

  - task: PublishTestResults@2
    displayName: 'Publish Test Results'
    inputs:
      testResultsFiles: '**/*.junit'
      failTaskOnFailedTests: false
      testRunTitle: 'E2E Tests - iOS'
      searchFolder: '$(Agent.BuildDirectory)/iOSHost'
      mergeTestResults: true
    condition: always()
